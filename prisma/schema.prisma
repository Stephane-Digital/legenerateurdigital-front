// =============================================================
// ‚öôÔ∏è PRISMA SCHEMA ‚Äî Le G√©n√©rateur Digital
// Base locale SQLite (facile √† migrer plus tard vers PostgreSQL)
// =============================================================

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

// =============================================================
// ‚ö° AUTOMATISATIONS INTELLIGENTES
// =============================================================
model Automatisation {
  id          Int      @id @default(autoincrement())
  name        String
  description String
  status      String   @default("Active") // Active | En pause | Termin√©e
  color       String   @default("green") // Vert = active / Orange = pause / Gris = termin√©
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt // ‚úÖ pour les futures modifications

  // ‚úÖ Relation optionnelle vers un utilisateur (future extension)
  userId Int?
  user   User? @relation(fields: [userId], references: [id])
}

// =============================================================
// üë§ UTILISATEUR
// =============================================================
model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  password  String
  full_name String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ‚úÖ Relations
  automatisations Automatisation[]
  idees           IdeeEntreprise[]
  businessPlans   BusinessPlan[]
}

// =============================================================
// üí° ID√âE D‚ÄôENTREPRISE ‚Äî √âtape 1
// =============================================================
model IdeeEntreprise {
  id          Int      @id @default(autoincrement())
  userId      Int?
  titre       String
  description String
  marche      String
  promesse    String
  createdAt   DateTime @default(now())

  // Relation
  user User? @relation(fields: [userId], references: [id])
}

// =============================================================
// üß† BUSINESS PLAN ‚Äî √âtape 2
// =============================================================
model BusinessPlan {
  id          Int      @id @default(autoincrement())
  userId      Int?
  title       String
  activity    String
  description String
  aiContent   String? // Contenu g√©n√©r√© par l‚ÄôIA
  pdfUrl      String? // Lien vers le fichier PDF g√©n√©r√©
  createdAt   DateTime @default(now())

  // Relation
  user User? @relation(fields: [userId], references: [id])
}
model Bibliotheque {
  id          Int      @id @default(autoincrement())
  userId      Int?
  titre       String
  type        String   // texte | image | prompt
  contenu     String
  createdAt   DateTime @default(now())

  user User? @relation(fields: [userId], references: [id])
}
